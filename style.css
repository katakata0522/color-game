:root {
  --base-font-size: 16px;
  --container-padding: 2em;
  --board-gap: 6px;
  --panel-gap: 6px;
  --title-font-size: 2.2rem;
  --info-font-size: 1rem;
  --button-font-size: 1rem;
  --brand: #1a73e8;
}
html { font-size: var(--base-font-size); }
body {
  font-family: 'Noto Sans JP', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
  font-weight: 400;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  min-height: 100vh; background-color: #f0f2f5; color: #333;
  margin: 0; padding: 1em; box-sizing: border-box; transition: background-color 0.5s ease;
}
.container {
  background-color: #fff; padding: var(--container-padding); border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center; width: 100%; max-width: 640px;
  margin: max(1vh, 1em) 0; box-sizing: border-box; transition: box-shadow 0.5s ease;
}
h1 { color: var(--brand); margin: 0 0 .7em; font-size: var(--title-font-size); font-weight: 700; }
.row { display: inline-flex; align-items: center; gap: .6em; margin-bottom: .6em; }
.row.wrap { display: flex; flex-wrap: wrap; justify-content: center; gap: .5em; }
.muted { font-size: .9em; color: #666; }
button {
  padding: .8em 1.5em; font-size: var(--button-font-size); font-weight: 700; font-family: inherit; border: none; border-radius: 8px; cursor: pointer;
  transition: background-color .2s, transform .1s; min-width: 120px; background: #e8f0fe; color: #222; border: 1.5px solid var(--brand);
}
button:hover { transform: translateY(-2px); }
button:active { transform: translateY(0); }
button:disabled { opacity: .6; cursor: not-allowed; transform: none; }
#highlight-btn { padding: .3em 1.2em; min-width: auto; border-color: #666; background: #eee; color: #222; }
#highlight-btn.active { background: var(--brand); color:#fff; border-color: var(--brand); }
#cb-mode-switcher button.selected, #cb-mode-switcher button:focus { background: var(--brand); color:#fff; z-index: 1; outline: none; }
.tooltip { font-size: .95em; color: #557; background: #f4f7fa; border-radius: 8px; padding: .5em 1em; box-shadow: 0 1px 5px rgba(20,60,140,.08); min-width: 160px; max-width: 360px; text-align: left; }
.info { display:flex; justify-content: space-around; align-items:center; margin: 1em 0; padding: .8em 1em; background:#e8f0fe; border-radius: 8px; font-size: var(--info-font-size); flex-wrap: wrap; gap: 10px 15px; font-weight:700; }
#hearts svg { width: 1.4em; height: 1.4em; margin-right: 3px; vertical-align: middle; fill: #e53935; }
#hearts svg.broken { fill:#9e9e9e; }
#game-board { display:grid; grid-template-columns: repeat(5,1fr); gap: var(--panel-gap); width: 100%; max-width: min(480px, calc(95vw - var(--container-padding) * 2)); aspect-ratio: 1/1; margin: 1.2em auto; background:#eee; padding: var(--board-gap); border-radius: 8px; box-sizing: border-box; }
.panel { background:#ccc; border-radius:6px; cursor:pointer; transition: transform .1s, box-shadow .1s; width:100%; height:0; padding-bottom:100%; position:relative; overflow:hidden; }
.panel:hover { transform: scale(1.05); box-shadow: 0 2px 6px rgba(0,0,0,.2); z-index:1; }
.panel:focus { outline: 2px solid var(--brand); outline-offset: 2px; z-index:1; }
#result-message { font-size: 1.2rem; font-weight:700; min-height: 1.5em; margin-bottom: 1em; transition: color .3s ease; }
.controls { display:flex; justify-content:center; gap: 15px; flex-wrap:wrap; }
#start-btn { background:#4CAF50; color:#fff; border-color:#4CAF50; }
#start-btn:hover:not(:disabled) { background:#45a049; }
#reset-btn { background:#f44336; color:#fff; border-color:#f44336; }
#reset-btn:hover:not(:disabled) { background:#e53935; }
.hidden { display:none; }
body.game-cleared { animation: celebrate-bg 1.5s infinite alternate; }
.container.game-cleared { box-shadow: 0 0 25px rgba(255,215,0,.7); }
#result-message.cleared { animation: celebrate-text 1s infinite alternate; font-size: 1.4rem; }
@keyframes celebrate-bg { from { background:#f0f2f5; } to { background:#fffacd; } }
@keyframes celebrate-text { from { transform: scale(1); color: blue; } to { transform: scale(1.1); color: gold; } }
#advice-message { margin-top: 1.2em; color:#555; font-size:.98em; background:#fcfcfc; border-radius:8px; padding: 1em .8em .7em; }

@media (max-width: 600px) {
  :root { --base-font-size: 14px; --container-padding: 1.5em; --board-gap:4px; --panel-gap:4px; --title-font-size: 1.8rem; --info-font-size: .9rem; --button-font-size: .95rem; }
  #game-board { max-width: min(400px, calc(95vw - var(--container-padding) * 2)); }
  button { padding: .7em 1.2em; min-width: 100px; }
  #result-message { font-size: 1.1rem; }
  #result-message.cleared { font-size: 1.3rem; }
}
@media (max-width: 400px) {
  :root { --base-font-size: 13px; --container-padding: 1em; --title-font-size: 1.6rem; }
  #game-board { max-width: min(300px, calc(95vw - var(--container-padding) * 2)); }
  .controls { gap: 10px; }
  button { min-width: 90px; }
}

